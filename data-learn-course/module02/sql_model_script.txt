CREATE TABLE customer_dim
(
 customer_id   varchar(50) NOT NULL,
 customer_name varchar(50) NOT NULL,
 CONSTRAINT PK_78 PRIMARY KEY ( customer_id )
);


CREATE TABLE order_dim
(
 order_id  varchar(50) NOT NULL,
 returned  char(50) NOT NULL,
 ship_date date NOT NULL,
 ship_mode varchar(50) NOT NULL,
 CONSTRAINT PK_76 PRIMARY KEY ( order_id )
);


CREATE TABLE product_dim
(
 product_id   serial NOT NULL,
 product_name varchar(50) NOT NULL,
 category     varchar(50) NOT NULL,
 sub_category varchar(50) NOT NULL,
 segment      varchar(50) NOT NULL,
 CONSTRAINT PK_58 PRIMARY KEY ( product_id )
);


CREATE TABLE region_dim
(
 location_id serial NOT NULL,
 country     varchar(50) NOT NULL,
 "state"       varchar(50) NOT NULL,
 city        varchar(50) NOT NULL,
 postal_code int8range NOT NULL,
 region      varchar(50) NOT NULL,
 CONSTRAINT PK_34 PRIMARY KEY ( location_id )
);


CREATE TABLE sales_fact
(
 row_id      serial NOT NULL,
 sales       decimal NOT NULL,
 profit      decimal NOT NULL,
 quantity    integer NOT NULL,
 discount    decimal NOT NULL,
 salesman_id serial NOT NULL,
 product_id  serial NOT NULL,
 location_id serial NOT NULL,
 order_id    varchar(50) NOT NULL,
 customer_id varchar(50) NOT NULL,
 CONSTRAINT PK_73 PRIMARY KEY ( row_id ),
 CONSTRAINT FK_29 FOREIGN KEY ( salesman_id ) REFERENCES salesman_dim ( salesman_id ),
 CONSTRAINT FK_46 FOREIGN KEY ( location_id ) REFERENCES region_dim ( location_id ),
 CONSTRAINT FK_53 FOREIGN KEY ( order_id ) REFERENCES order_dim ( order_id ),
 CONSTRAINT FK_62 FOREIGN KEY ( product_id ) REFERENCES product_dim ( product_id ),
 CONSTRAINT FK_69 FOREIGN KEY ( customer_id ) REFERENCES customer_dim ( customer_id )
);

CREATE INDEX FK_31 ON sales_fact
(
 salesman_id
);

CREATE INDEX FK_48 ON sales_fact
(
 location_id
);

CREATE INDEX FK_55 ON sales_fact
(
 order_id
);

CREATE INDEX FK_64 ON sales_fact
(
 product_id
);

CREATE INDEX FK_71 ON sales_fact
(
 customer_id
);


CREATE TABLE salesman_dim
(
 salesman_id serial NOT NULL,
 person      varchar(50) NOT NULL,
 CONSTRAINT PK_23 PRIMARY KEY ( salesman_id )
);